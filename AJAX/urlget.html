<!DOCTYPE html>
<html>
    <head>
        <title>>Пример использования AJAX</title>
    </head>
    <body style='text-align:center'>
        <h1>Загрузка веб-страницы в контейнер DIV</h1>
        <div id='info'>Это предложение будет заменено</div>
        
        <script>
            nocache = "&nocache=" + Math.random() * 1000000
            request = new ajaxRequest()
            request.open("GET", "urlget.php?url=amazon.com/gp/aw " + nocache, true)
            
            request.onreadystatechange = function()
            {
                if(this.readyState == 4){
                    if(this.status == 200){
                        if(this.responseText != null){
                            document.getElementById('info').innerHTML = this.responseText
                        }
                        else alert("Ошибка AJAX: Данные не получены")
                    }
                    else alert("Ошибка AJAX: " + this.statusText)
                }
            }
            
            request.send(null)
            
            function ajaxRequest()
            {
                try
                {
                    var request = new XMLHttpRequest()
                }
                catch(e1)
                {
                    try
                    {
                        request = new ActiveXObject("Msxml2.XMLHTTP")
                    }
                    catch(e2)
                    {
                        try
                        {
                            request = new ActiveXObject("Microsoft.XMLHTTP")
                        }
                        catch(e3)
                        {
                            request = false
                        }
                    }
                }
                return request
            }
        </script>
    </body>
</html>
